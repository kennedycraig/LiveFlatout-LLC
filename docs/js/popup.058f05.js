var doParallax,pop={isIOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,isChrome:/chrome/i.test(navigator.userAgent),isFF:/firefox/i.test(navigator.userAgent),addEvent:function(t,e,o){return null!=t.addEventListener?t.addEventListener(e,o,!1):null!=t.attachEvent?t.attachEvent("on"+e,o):t[e]=o},removeEvent:function(t,e,o){return null!=t.removeEventListener?t.removeEventListener(e,o):null!=t.detachEvent?t.detachEvent("on"+e,o):t[e]=null},addPopupTransitionEndEvent:function(t,e){function o(){i(n)}var n,i;n=t,i=e;this.addEvent(t,"transitionend",o),t.fn=o},removePopupTransitionEndEvent:function(t){this.removeEvent(t,"transitionend",t.fn),t.fn=null},prop:function(t,e,o){for(var n=void 0,i=("Transform"===e&&(n=t.getAttribute("data-popup-transform"))&&(o.length&&(o+=" "),o+=n),"Webkit Moz O ms Khtml".split(" ")),s=0;s<i.length;s++)if(void 0!==t.style[i[s]+e])return void(t.style[i[s]+e]=o);void 0!==t.style[e.toLowerCase()]&&(t.style[e.toLowerCase()]=o)},animationSupport:function(){if(null!=this.animations)return this.animations;var t=document.createElement("div");if(void 0!==t.style.animationName)return this.animations=!0;for(var e="Webkit Moz O ms Khtml".split(" "),o=0;o<e.length;o++)if(void 0!==t.style[e[o]+"AnimationName"])return this.animations=!0;return this.animations=!1},animationForPopup:function(t){var e,o=void 0;if(this.animationSupport())for(o=e=this.hasClass(t,"animm")?t:t.querySelector(".animm");null!=o&&null===o.getAttribute("data-popup-type");)o=o.parentNode;return o===t?e:void 0},popupFadeOut:function(t){t.style.visibility="hidden",this.prop(t,"Transform","translate3d(-999999px,0,0)"),t.offsetWidth,this.removePopupTransitionEndEvent(t)},closeGroup:function(t){if(0!=t.hasAttribute("data-popup-group"))for(var e=t.getAttribute("data-popup-group"),o=document.getElementsByClassName("popup"),n=o.length-1;0<=n;n--)for(var i=o[n];i!=t&&i!=document;){if(i.getAttribute("data-popup-group")===e){if(!1!==this.isOpen(i))this.closePopup(i.id);else if(i.hasAttribute("data-popup-open"))return!1;break}i=i.parentNode}return!0},show:function(t){t=document.getElementById(t);this.prop(t,"Transform","")},openPopup:function(t,e){void 0!==e&&e.stopImmediatePropagation();e=document.getElementById(t);if(null!==e&&this.closeGroup(e)){var o=this.canOpen(e);if(!1!==o){void 0!==o?wl.doAnimate(o):(e.style.visibility="visible",e.style.opacity=1),doParallax&&doParallax();var n,i,s=e.querySelector(".popup"),s=(null!=s?s:e).children[0],s=(void 0!==s&&"scroll"===getComputedStyle(s).getPropertyValue("overflow")&&(s.style.overflow="hidden",s.style.overflow=""),e.setAttribute("data-popup-open",!0),e.getAttribute("data-popup-close")),s=(0<s&&setTimeout(function(){pop.closePopup(t)},s),e.getAttribute("data-popup-type"));if(0<s&&(null!=o&&(e.style.visibility="visible",e.style.opacity=1,o=e.getAttribute("data-popup-bdf"))&&(e.style.backdropFilter=o),1==s)&&(o=document.body,e.escapePressed=(i=e,function(t){var e;!1!==pop.isOpen(i)&&(e=i.getAttribute("onclick"))&&0<e.length&&27==t.keyCode&&i.escapePressed&&(pop.closePopup(i.id),pop.removeEvent(document,"keyup",i.escapePressed),i.escapePressed=void 0)}),this.updateAlign(),this.addEvent(document,"keyup",e.escapePressed),this.addClass(o,"modpop"),o.setAttribute("data-modpop",t),e.addEventListener)&&e.addEventListener("touchstart",this.touchstartEL=(n=e,function(t){var e;void 0===t.touches||t.touches.length<=1?n.addEventListener("touchend",this.touchendEL=(e=n,function(t){t.target==e&&(t=e.getAttribute("onclick"))&&0<t.length&&pop.closePopup(e.id),e.removeEventListener("touchend",this.touchendEL)})):n.removeEventListener("touchend",this.touchendEL)})),this.prop(e,"Transform",""),null!=this.hook&&null!=this.hook[t])for(var a=this.hook[t],r=a.length,p=0;p<r;p++)null!=a[p].open&&a[p].open();s=document.createEvent("Event");s.initEvent("scroll",!0,!0),window.dispatchEvent(s)}}return!1},getScrollbarWidth:function(){var t=document.createElement("div"),e=(t.style.width="100px",t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t),t.offsetWidth-t.clientWidth);return document.body.removeChild(t),e},isOpen:function(t){return!(!t.hasAttribute("data-popup-open")||t.fn||this.hasClass(t,"animated")||null!=(t=this.animationForPopup(t))&&this.hasClass(t,"animated"))&&t},canOpen:function(t){var e=this.animationForPopup(t);return!(t.hasAttribute("data-popup-open")||null!=t.fn||this.hasClass(t,"animated")||null!=e&&this.hasClass(e,"animated"))&&e},openClosePopup:function(t,e){var o=document.getElementById(t);return!1===this.isOpen(o)?this.openPopup(t,e):this.closePopup(t,e),!1},closePopup:function(t,e){void 0!==e&&e.stopImmediatePropagation();var e=document.getElementById(t),o=this.isOpen(e);if(!1!==o){var n=e.getAttribute("data-popup-type"),o=(e.removeAttribute("data-popup-open"),null!=(o=this.animationForPopup(e))&&wl.doAnimate(o,1),e!=o&&(null!=o&&0!=n?(e.style.opacity="",e.style.backdropFilter="",this.addPopupTransitionEndEvent(e,this.popupFadeOut.bind(this))):(e.style.visibility="hidden",this.prop(e,"Transform","translate3d(-999999px,0,0)"),e.style.opacity=0)),document.body);if(1==n&&(o.removeAttribute("data-modpop"),this.removeClass(o,"modpop"),this.updateAlign(!0)),e.removeEventListener&&this.touchstartEL&&e.removeEventListener("touchstart",this.touchstartEL),null!=this.hook&&null!=this.hook[t])for(var i=this.hook[t],s=i.length,a=0;a<s;a++)null!=i[a].close&&i[a].close()}return!1},overPopup:function(t,e){var o=document.getElementById(e);!1===this.isOpen(o)?this.openPopup(e):t.oo&&(clearTimeout(t.oo),t.oo=void 0)},overoutPopup:function(t,e){n=e;var o,n,i=function(){var t=null!=n?document.getElementById(n):void 0;!o.oo||pop.isOver(o)||null!=t&&!1!==pop.isOpen(t)&&pop.isOver(t.querySelector(".popup")||t)?o.oo=setTimeout(i,o.oo?100:1):(o.oo=void 0,null!=n&&(!1!==pop.isOpen(t)?pop.closePopup(n):t.hasAttribute("data-popup-open")&&(o.oo=setTimeout(i,100))))};(o=t).oo&&(clearTimeout(t.oo),t.oo=void 0),i()},mouseMove:function(t){this.mouseX=t.clientX,this.mouseY=t.clientY},touchStart:function(t,e,o){t.touches.length&&(this.mouseX=t.touches[0].clientX,this.mouseY=t.touches[0].clientY),this.overPopup(e,o)},touchMove:function(t){t.touches.length&&(this.mouseX=t.touches[0].clientX,this.mouseY=t.touches[0].clientY)},touchEnd:function(t,e,o){t.touches.length&&(this.mouseX=t.touches[0].clientX,this.mouseY=t.touches[0].clientY)},isOver:function(t){var e,t=t.getBoundingClientRect();return this.isFF||(e=this.z(),t={left:t.left*e,right:t.right*e,top:t.top*e,bottom:t.bottom*e},this.isChrome)||(t.top+=window.scrollY*(e-1),t.bottom+=window.scrollY*(e-1)),this.mouseX>=parseInt(t.left)&&this.mouseX<=parseInt(t.right)&&this.mouseY>=parseInt(t.top)&&this.mouseY<=parseInt(t.bottom)},hasClass:function(t,e){var o=t.classList;return null!=o?o.contains(e):-1<(" "+t.className+" ").indexOf(" "+e+" ")},addClass:function(t,e){var o=t.classList;null!=o?o.add(e):t.className+=" "+e},removeClass:function(t,e){var o=t.classList;null!=o?o.remove(e):0<=(e=(o=t.className.split(" ")).indexOf(e))&&(o.splice(e,1),t.className=o.join(" "))},addHook:function(t,e,o){null==this.hook&&(this.hook={}),null==this.hook[t]&&(this.hook[t]=[]),this.hook[t].push({open:e,close:o}),document.getElementById(t).hasAttribute("data-popup-open")&&e&&e()},z:function(){var t=parseFloat(getComputedStyle(document.body).getPropertyValue("zoom"));return t||1},updateAlign:function(t){var e,o,n,i=0,s=this.z(),a=document.body,r=a.style,p=void 0;this.isIOS&&"none"==getComputedStyle(a.parentNode).getPropertyValue("scroll-snap-type")&&(o=(p=r.cssText).indexOf("margin-top"),n=p.indexOf("position"),0<=o)&&0<=n&&0<=(n=p.indexOf(";",n+8))&&(e=-parseInt(r.marginTop)*s,p=p.substring(0,o)+p.substring(n+1),r.cssText=p,window.scrollTo(0,e)),t||(o=document.documentElement.clientWidth,this.isIOS?p&&(p+="margin-top:-"+(window.scrollY/s).toFixed(3)+"px;width:100%;position:fixed;",r.cssText+=p):(i=-parseInt(this.getScrollbarWidth()*s),n=window.getComputedStyle(a).getPropertyValue("min-width"),console.log("mw:"+n+" cw:"+o+" iw:"+window.innerWidth+" ow:"+window.outerWidth),"0px"!==n&&(n=parseInt(n)*s)>o&&0<(i+=parseInt(n)-o)&&(i=0)),i=o==window.innerWidth+i||window.outerWidth==window.innerWidth?parseInt(i/s):0),r.setProperty("--sw",i+"px")},init:function(){function t(){var t,e=pop.z(),e=.01*window.innerHeight/e;pop.vh!==e&&(t=document.body,pop.vh=e,t.style.setProperty("--vh",e+"px"),null!==t.getAttribute("data-modpop"))&&(pop.removeClass(t,"modpop"),pop.updateAlign(),pop.addClass(t,"modpop"))}var e;"requestAnimationFrame"in window?(e=function(){t(),requestAnimationFrame(e)},requestAnimationFrame(e)):(this.addEvent(window,"resize",t),t()),this.addEvent(window,"mousemove",this.mouseMove.bind(this)),this.addEvent(window,"touchmove",this.touchMove.bind(this))}};pop.init();
